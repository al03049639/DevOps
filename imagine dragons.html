<!DOCTYPE html>
<html lang="es">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Compra - Imagine Dragons</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #0071ce;
      margin-bottom: 10px;
    }
    p {
      margin-bottom: 30px;
      font-size: 1.1em;
    }
    .map-container {
      position: relative;
      width: 600px;
      height: 400px;
      margin: 0 auto;
      opacity: 50;
      background: url('https://periodicocorreo.com.mx/__export/sites/correo/img/2024/03/06/103015s-071653982.jpg') no-repeat center center;
      background-size: contain;
      border: 2px solid #ccc;
      border-radius: 10px;
      overflow: hidden;
    }
    .seat {
      position: absolute;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: none;
      color: white;
      font-size: 0.8em;
      cursor: pointer;
      transition: 0.3s;
    }
    .vip { background-color: #d4af37; } /* Oro */
    .general { background-color: #0071ce; } /* Azul */
    .balcon { background-color: #8e44ad; } /* Morado */
    .occupied { background-color: grey !important; cursor: not-allowed; }
    .selected { background-color: #28a745 !important; }

    .legend {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    .legend div {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9em;
    }
    .legend .box {
      width: 20px;
      height: 20px;
      border-radius: 50%;
    }
    .btn-confirmar {
      margin-top: 30px;
      padding: 10px 30px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1.1em;
      cursor: pointer;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      width: 90%;
      max-width: 400px;
      animation: aparecer 0.3s ease;
    }
    @keyframes aparecer {
      from {transform: scale(0.7);}
      to {transform: scale(1);}
    }
    .modal-content select, .modal-content input, .modal-content button {
      margin-top: 15px;
      width: 100%;
      padding: 10px;
      font-size: 1em;
    }
    .btn-pagar {
      background-color: #0071ce;
      color: white;
      border: none;
      border-radius: 5px;
      margin-top: 20px;
      cursor: pointer;
    }
    .resumen {
      background: #e0e0e0;
      padding: 20px;
      margin-top: 20px;
      border-radius: 10px;
      font-size: 0.95em;
      text-align: left;
    }
    #precio-total {
      margin-top: 20px;
      font-size: 1.2em;
      color: #333;
    }
  </style>
</head>
<body>

    <h1>Compra tus boletos - Bring Me The Horizon</h1>
    <p>Selecciona tus asientos:</p>
    
    <div class="map-container">
      <!-- Asientos -->
      <button class="seat vip" data-precio="2500" style="top:50px; left:100px;">VIP1</button>
      <button class="seat vip occupied" data-precio="2500" style="top:50px; left:150px;" disabled>VIP2</button>
      <button class="seat vip" data-precio="2500" style="top:50px; left:200px;">VIP3</button>
    
      <button class="seat general" data-precio="1500" style="top:150px; left:100px;">G1</button>
      <button class="seat general" data-precio="1500" style="top:150px; left:150px;">G2</button>
      <button class="seat general" data-precio="1500" style="top:150px; left:200px;">G3</button>
    
      <button class="seat balcon" data-precio="800" style="top:250px; left:100px;">B1</button>
      <button class="seat balcon" data-precio="800" style="top:250px; left:150px;">B2</button>
      <button class="seat balcon" data-precio="800" style="top:250px; left:200px;">B3</button>
    </div>
    
    <div class="legend">
      <div><div class="box" style="background:#d4af37;"></div> VIP ($2500)</div>
      <div><div class="box" style="background:#0071ce;"></div> General ($1500)</div>
      <div><div class="box" style="background:#8e44ad;"></div> Balcón ($800)</div>
    </div>
    
    <div id="precio-total">Total: $0 MXN</div>
    
    <button class="btn-confirmar">Confirmar Compra</button>
    
    <!-- Modal -->
    <div id="modal" class="modal">
      <div class="modal-content">
        <h2>Detalles de Pago</h2>
        <input type="text" id="nombre" placeholder="Nombre completo">
        <input type="email" id="correo" placeholder="Correo electrónico">
        <select id="metodo-pago" onchange="mostrarCamposExtra()">
          <option value="">-- Selecciona método de pago --</option>
          <option value="debito">Tarjeta de Débito</option>
          <option value="credito">Tarjeta de Crédito</option>
          <option value="paypal">PayPal</option>
        </select>
        <div id="extra-fields"></div>
        <button class="btn-pagar" onclick="pagar()">Pagar</button>
      </div>
    </div>
    
    <!-- Código QR -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
    
    <script>
      const seats = document.querySelectorAll('.seat:not(.occupied)');
      const btnConfirmar = document.querySelector('.btn-confirmar');
      const precioTotal = document.getElementById('precio-total');
      const modal = document.getElementById('modal');
    
      seats.forEach(seat => {
        seat.addEventListener('click', () => {
          seat.classList.toggle('selected');
          actualizarTotal();
        });
      });
    
      function actualizarTotal() {
        const selectedSeats = document.querySelectorAll('.seat.selected');
        let total = 0;
        selectedSeats.forEach(seat => {
          total += parseInt(seat.dataset.precio);
        });
        precioTotal.textContent = `Total: $${total} MXN`;
      }
    
      btnConfirmar.addEventListener('click', () => {
        const selectedSeats = document.querySelectorAll('.seat.selected');
        if (selectedSeats.length === 0) {
          alert('Por favor selecciona al menos un asiento.');
        } else {
          modal.style.display = 'flex';
        }
      });
    
      function mostrarCamposExtra() {
        const metodo = document.getElementById('metodo-pago').value;
        const extraFields = document.getElementById('extra-fields');
        extraFields.innerHTML = '';
    
        if (metodo === 'debito' || metodo === 'credito') {
          extraFields.innerHTML = `<input type="text" id="tarjeta" placeholder="Número de Tarjeta">`;
        } else if (metodo === 'paypal') {
          extraFields.innerHTML = `<input type="email" id="paypal" placeholder="Correo de PayPal">`;
        }
      }
    
      function pagar() {
        const nombre = document.getElementById('nombre').value;
        const correo = document.getElementById('correo').value;
        const metodo = document.getElementById('metodo-pago').value;
        const tarjeta = document.getElementById('tarjeta') ? document.getElementById('tarjeta').value : '';
        const paypal = document.getElementById('paypal') ? document.getElementById('paypal').value : '';
        const selectedSeats = Array.from(document.querySelectorAll('.seat.selected')).map(seat => seat.innerText);
        const precios = Array.from(document.querySelectorAll('.seat.selected')).map(seat => parseInt(seat.dataset.precio));
        let total = precios.reduce((acc, precio) => acc + precio, 0);
    
        if (!nombre || !correo || !metodo) {
          alert('Por favor completa todos los campos.');
          return;
        }
        if ((metodo === 'debito' || metodo === 'credito') && tarjeta.trim() === '') {
          alert('Por favor ingresa el número de tarjeta.');
          return;
        }
        if (metodo === 'paypal' && paypal.trim() === '') {
          alert('Por favor ingresa el correo de PayPal.');
          return;
        }
    
        modal.innerHTML = `
          <div class="modal-content">
            <h2>Resumen de Compra</h2>
            <div class="resumen">
              <strong>Nombre:</strong> ${nombre}<br>
              <strong>Correo:</strong> ${correo}<br>
              <strong>Asientos:</strong> ${selectedSeats.join(', ')}<br>
              <strong>Total a Pagar:</strong> $${total} MXN<br>
              <strong>Método de Pago:</strong> ${metodo}
            </div>
            <div id="qrcode" style="margin-top: 20px;"></div>
            <button class="btn-pagar" onclick="finalizarCompra()">Finalizar Compra</button>
          </div>
        `;
    
        const qrData = `Compra Confirmada:
    Nombre: ${nombre}
    Correo: ${correo}
    Asientos: ${selectedSeats.join(', ')}
    Total: $${total} MXN
    Método: ${metodo}`;
        
        new QRCode(document.getElementById("qrcode"), {
          text: qrData,
          width: 180,
          height: 180
        });
      }
    
      function finalizarCompra() {
        alert('¡Compra realizada con éxito!');
        window.location.href = "pagina web.html"; // Regresa al inicio
      }
    
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    </script>
    
    </body>
    </html>